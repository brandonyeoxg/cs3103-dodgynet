#!/usr/bin/env python3


"""
DodgyNet is a peer to peer file file sharing program that implements the 
DodgyNet protocol using the Happy Tracker and Puncher protocols to achieve
a fair and efficient file sharing. We designed the P2P system to work over
Private IP/NAT using the Puncher protocol to punch through the firewall
and/or NAT.
"""

import os
import sys
import argparse
import logging

possible_actions = ["upload", "join", "list", "query", "download"]

def main(arguments):

    logging.basicConfig(level=logging.DEBUG, format='%(asctime)s %(filename)s: +%(lineno)s: %(levelname)-8s [%(process)d] %(message)s')

    parser = argparse.ArgumentParser(
        description=__doc__,
        formatter_class=argparse.RawDescriptionHelpFormatter)
    parser.add_argument('action', help="Action to be performed, possible actions: %s" % ', '.join(possible_actions), 
            type=str, choices=possible_actions, metavar='action')
    parser.add_argument('-f', '--file', help="Target file to download from the"
            " directory server.", 
            default=sys.stdin, type=argparse.FileType('r'))
    parser.add_argument('-o', '--out', help="Output file path, saves the"
            " downloaded file to this path.", default=None, type=str)
    parser.add_argument('-d', '--dir', help="Address of the directory server",
            type=str, default="e2empire.com")

    args = parser.parse_args(arguments)
    logger = logging.getLogger()
    logger.info(args)
    #print(args['action'])
    print(args)

if __name__ == '__main__':
    sys.exit(main(sys.argv[1:]))

# vim: expandtab shiftwidth=4 softtabstop=4 textwidth=80:
